{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\admin\\model\\sys_menu.js"
    ],
    "names": [
        "module",
        "exports",
        "think",
        "Model",
        "addData",
        "param",
        "create_date",
        "datetime",
        "is_show",
        "isEmpty",
        "pid",
        "add",
        "delData",
        "where",
        "id",
        "delete",
        "updateData",
        "update_date",
        "update",
        "pageData",
        "allData",
        "menu",
        "pMenu",
        "del_flag",
        "order",
        "select",
        "i",
        "length",
        "item",
        "len",
        "push",
        "childMenu",
        "children",
        "getData",
        "find",
        "getMyMenuData",
        "user_id",
        "role_id",
        "rolemenu",
        "model",
        "menuids",
        "menu_id",
        "getMenuTree"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\admin\\model\\sys_menu.js",
    "sourcesContent": [
        "'use strict';\n\nmodule.exports = class extends think.Model {\n\t\n\tasync addData(param){\n\t\tparam.create_date=think.datetime();\n\t\tparam.is_show=1;\n\t\tif(think.isEmpty(param.pid)){\n\t\t\tparam.pid=0;\n\t\t}\n\t\tawait this.add(param);\n\t}\n\n\tasync delData(param){\n\t\tawait this.where({id:param.id}).delete();\n\t}\n\n\tasync updateData(param){\n\t\tlet id=param.id;\n\t\tparam.update_date=think.datetime();\n\t\tdelete param.id;\n\t\tdelete param.create_date;\n\t\tawait this.where({id:id}).update(param);\n\t}\n\n\tasync pageData(param){\n\n\t}\n\n\tasync allData(param){\n\t\tlet menu=[];\n\t\tlet pMenu=await this.where({pid:0,del_flag:0,is_show:1}).order(\"sort\").select();\n\t\tfor (var i = 0; i < pMenu.length; i++) {\t\t\n\t\t\tlet item=pMenu[i];\n\t\t\tlet len =menu.push(item);\n\t        let childMenu=await this.where({pid:item.id,del_flag:0,is_show:1}).order(\"sort\").select();\n\t\t\tmenu[len - 1].children = childMenu;\n\t    }\n\t\treturn menu;\n\t}\n\n\tasync getData(id){\n\t\treturn await this.where({id: id}).find();\n\t}\n\n\tasync getMyMenuData(user_id,role_id){\n\t\tlet menu=[];\n\t\tif(user_id=='1'&&think.isEmpty(role_id)){\n\t\t\tlet pMenu=await this.where({pid:0,del_flag:0,is_show:1}).order(\"sort\").select();\n\t\t\tfor (var i = 0; i < pMenu.length; i++) {\t\t\n\t\t\t\tlet item=pMenu[i];\n\t\t\t\tlet len =menu.push(item);\n\t\t        let childMenu=await this.where({pid:item.id,del_flag:0,is_show:1}).order(\"sort\").select();\n\t\t\t\tmenu[len - 1].children = childMenu;\n\t\t    }\n\t\t}else{\n\t\t\tlet rolemenu=await this.model('sys_role_menu').where({role_id:role_id}).select();\n\t\t\tlet menuids=[];\n\t\t\tfor (var i = 0; i < rolemenu.length; i++) {\t\t\n\t\t\t\tlet item=rolemenu[i];\n\t\t\t\tmenuids.push(item.menu_id);\n\t\t    }\n\t\t\t\n\t\t\tlet pMenu=await this.where({pid:0,del_flag:0,is_show:1,id: ['IN', menuids]}).order(\"sort\").select();\n\t\t\tfor (var i = 0; i < pMenu.length; i++) {\t\t\n\t\t\t\tlet item=pMenu[i];\n\t\t\t\tlet len =menu.push(item);\n\t\t        let childMenu=await this.where({pid:item.id,del_flag:0,is_show:1,id: ['IN',menuids]}).order(\"sort\").select();\n\t\t\t\tmenu[len - 1].children = childMenu;\n\t\t    }\n\t\t}\n\t\treturn menu;\n\t\t\n\t}\n\n\tasync getMenuTree(){\n\t\tlet menu=[];\n\t\tlet pMenu=await this.where({pid:0,del_flag:0,is_show:1}).order(\"sort\").select();\n\t\tfor (var i = 0; i < pMenu.length; i++) {\t\t\n\t\t\tlet item=pMenu[i];\n\t\t\tlet len =menu.push(item);\n\t        let childMenu=await this.where({pid:item.id,del_flag:0,is_show:1}).order(\"sort\").select();\n\t\t\tmenu[len - 1].children = childMenu;\n\t    }\n\t\treturn menu;\t\t\n\t}\n\n};\n"
    ]
}